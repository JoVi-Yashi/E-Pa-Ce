spring.application.name=backend
server.port=8081

#------------------------------------------------------------------
#               Conexion Base de Datos
#------------------------------------------------------------------

# 1. Configuracion de la URL de la Base de Datos
spring.datasource.url=jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:EPaCe}

# 2. Credenciales
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:PS8289}

# 3. Especificar el driver
spring.datasource.driver-class-name=org.postgresql.Driver


#-------------------------------------------------------------------
#               EndPoints Actuator
#-------------------------------------------------------------------

management.endpoints.web.base-path=/actuator
management.endpoints.web.exposure.include=*
management.info.env.enabled=true

info.app.name=EPaCe
info.app.description=Aplicativo web para gestionar reuniones y su respectivo check-in
info.app.version=0.0.1-ALPHA


#-------------------------------------------------------------------
#               Security & JWT Configuration
#-------------------------------------------------------------------

spring.security.user.name=paco
spring.security.user.password=12345

# JWT Configuration
# IMPORTANTE: Cambiar esta clave secreta en producci\u00F3n (usar al menos 256 bits)
# Puedes generar una clave segura con: openssl rand -base64 64
app.jwtSecret=404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970337336763979244226452948404D635166546A576E5A7234753778214125442A
app.jwtExpirationMs=86400000


#--------------------------------------------------------------------
#               Spring Data JPA and Hibernate Configuration
#--------------------------------------------------------------------

# Configure the Hibernate DDL-auto mode
# Options: none, update, create, create-drop, validate
# IMPORTANTE: En producci\u00F3n usar 'validate' o 'none' y gestionar migraciones con Flyway/Liquibase
spring.jpa.hibernate.ddl-auto=update

# Set the dialect to optimize SQL for PostgreSQL
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Show generated SQL in the console (useful for debugging, desactivar en producci\u00F3n)
spring.jpa.show-sql=true

# Format SQL output for better readability
spring.jpa.properties.hibernate.format_sql=true

# Use SQL comments to identify the origin of queries
spring.jpa.properties.hibernate.use_sql_comments=true

# Logging SQL statements
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.hibernate.orm.jdbc.bind=TRACE

# Naming strategy - usar snake_case para columnas y tablas
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyJpaCompliantImpl

# Enable batch processing for better performance
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.batch_versioned_data=true

# Enable second-level cache (opcional, requiere configuraci\u00F3n adicional)
# spring.jpa.properties.hibernate.cache.use_second_level_cache=true
# spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.jcache.JCacheRegionFactory

# Enable query cache (opcional)
# spring.jpa.properties.hibernate.cache.use_query_cache=true

# Enable statistics for monitoring (desactivar en producci\u00F3n si no se usa)
spring.jpa.properties.hibernate.generate_statistics=false

# Configuraci\u00F3n de HikariCP (Pool de conexiones)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.pool-name=EPaCe-HikariCP

# Enable JPA auditing (para @CreatedDate, @LastModifiedDate, etc.)
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=false

# Timezone configuration
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# Configuraci\u00F3n para ejecutar data.sql despu\u00E9s de Hibernate
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true